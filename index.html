<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elian & Yhos ðŸ’™</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:linear-gradient(135deg,#0f172a,#1e293b,#111827);
  color:white;
}

.wrapper{
  max-width:1000px;
  margin:auto;
  padding:20px;
}

h1{
  text-align:center;
  color:#3b82f6;
}

.layout{
  display:flex;
  flex-direction:column;
  gap:20px;
}

@media(min-width:768px){
  .layout{
    flex-direction:row;
  }
}

.card{
  background:#1e293b;
  padding:20px;
  border-radius:15px;
  flex:1;
  box-shadow:0 0 25px rgba(59,130,246,0.2);
}

select,input,button{
  width:100%;
  padding:10px;
  margin:6px 0;
  border:none;
  border-radius:8px;
}

select,input{
  background:#334155;
  color:white;
}

button{
  background:#3b82f6;
  color:white;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  background:#60a5fa;
  transform:scale(1.03);
}

.date-item{
  background:#334155;
  padding:8px;
  border-radius:8px;
  margin-top:6px;
  cursor:pointer;
  transition:0.3s;
}

.date-item.done{
  text-decoration:line-through;
  opacity:0.6;
}

.counter{
  margin-top:10px;
  color:#60a5fa;
  font-weight:bold;
}

.notification{
  margin-top:15px;
  padding:15px;
  background:#0f172a;
  border-left:4px solid #3b82f6;
  border-radius:8px;
  display:none;
}

.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
  margin-top:15px;
}

.box{
  background:#0f172a;
  padding:20px;
  border-radius:8px;
  cursor:pointer;
  transition:0.3s;
  text-align:center;
  font-size:20px;
}

.box:hover{
  background:#334155;
}
</style>
</head>

<body>

<div class="wrapper">
<h1>ðŸ’™ Elian & Yhos ðŸ’™</h1>

<div class="layout">

<div class="card">
<h2>Crear Cita</h2>

<select id="who">
<option value="Elian">Elian</option>
<option value="Yhos">Yhos</option>
</select>

<input type="text" id="title" placeholder="Â¿QuÃ© plan?">
<input type="date" id="day">

<button onclick="createDate()">Invitar ðŸ’Œ</button>

<div class="counter" id="counter"></div>
<div class="notification" id="notification"></div>

<div id="dates"></div>
</div>

<div class="card">
<h2>ðŸŽ® Our Game</h2>
<p style="color:#94a3b8">Se desbloquea al completar 5 citas</p>
<div id="gameArea"></div>
</div>

</div>
</div>

<script>
(function(){
emailjs.init("CgdscwW85CxOt9IHB");
})();

let completed = localStorage.getItem("completed") ? parseInt(localStorage.getItem("completed")) : 0;
let datesData = localStorage.getItem("dates") ? JSON.parse(localStorage.getItem("dates")) : [];

updateCounter();
renderDates();
checkUnlock();

function createDate(){
  const who=document.getElementById("who").value;
  const title=document.getElementById("title").value;
  const day=document.getElementById("day").value;

  if(!title || !day){
    alert("Completa todo ðŸ’™");
    return;
  }

  emailjs.send("service_c2msv6j","template_cfn5v8w",{
    email_subject:"ðŸ’™ Nueva InvitaciÃ³n",
    email_title:"ðŸ’™ Nueva InvitaciÃ³n",
    email_message: who+" te estÃ¡ invitando a una cita.",
    date_title:title,
    date_day:day,
    total_completed:completed
  });

  datesData.push({who,title,day,done:false});
  localStorage.setItem("dates",JSON.stringify(datesData));
  renderDates();

  document.getElementById("title").value="";
}

function renderDates(){
  const container=document.getElementById("dates");
  container.innerHTML="";

  datesData.forEach((d,index)=>{
    const div=document.createElement("div");
    div.className="date-item";
    if(d.done) div.classList.add("done");
    div.innerText=d.who+" â†’ "+d.title+" ("+d.day+")";

    div.onclick=function(){
      if(!d.done){
        d.done=true;
        completed++;
        localStorage.setItem("completed",completed);
        localStorage.setItem("dates",JSON.stringify(datesData));

        emailjs.send("service_c2msv6j","template_cfn5v8w",{
          email_subject:"âœ¨ Cita Completada",
          email_title:"âœ¨ Cita Completada",
          email_message:d.who+" cumpliÃ³ la misiÃ³n. Cita lograda.",
          date_title:d.title,
          date_day:d.day,
          total_completed:completed
        });

        updateCounter();
        renderDates();
        checkUnlock();
      }
    }

    container.appendChild(div);
  });
}

function updateCounter(){
  document.getElementById("counter").innerText="Citas completadas: "+completed;
}

function checkUnlock(){
  if(completed>=5){
    unlockGame();
    randomSuggestion();
  }
}

function unlockGame(){
  const game=document.getElementById("gameArea");
  game.innerHTML="";
  const winner=Math.floor(Math.random()*9);

  for(let i=0;i<9;i++){
    const box=document.createElement("div");
    box.className="box";
    box.onclick=function(){
      if(i===winner){
        this.innerText="ðŸ’™";
        alert("TÃº eliges la prÃ³xima cita ðŸ˜");
      }else{
        this.innerText="âœ–";
      }
    }
    game.appendChild(box);
  }
}

function randomSuggestion(){
  const ideas=[
    "Ir a patinar ðŸ›¼",
    "Noche de pelis ðŸŽ¬",
    "Salir por helado ðŸ¦",
    "Picnic improvisado ðŸŒŒ",
    "Competencia de videojuegos ðŸŽ®",
    "Caminata nocturna ðŸŒ™"
  ];

  const random=ideas[Math.floor(Math.random()*ideas.length)];
  const note=document.getElementById("notification");
  note.style.display="block";
  note.innerText="ðŸŽ Plan sugerido automÃ¡ticamente: "+random;
}
</script>

</body>
</html>
